"use strict";(self.webpackChunkuxp_xd=self.webpackChunkuxp_xd||[]).push([[6271],{6357:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return m}});var i=t(87462),a=t(45987),o=(t(15007),t(64983)),l=t(91515);const r=["components"],d={},p={_frontmatter:d},s=l.Z;function m(e){let{components:n}=e,t=(0,a.Z)(e,r);return(0,o.mdx)(s,(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"how-to-export-a-rendition"},"How to export a rendition"),(0,o.mdx)("p",null,"This sample describes how an XD plugin can invoke the default folder picker and generate a rendition of the selected artboard for export."),(0,o.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Basic knowledge of HTML, CSS, and JavaScript."),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"/uxp-xd/develop/tutorials/quick-start/"},"Quick Start Tutorial")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"/uxp-xd/develop/tutorials/debugging/"},"Debugging Tutorial"))),(0,o.mdx)("h2",{id:"development-steps"},"Development Steps"),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},(0,o.mdx)("strong",{parentName:"p"},"Info"),"\nComplete code for this plugin can be found ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/AdobeXD/Plugin-Samples/tree/master/how-to-export-a-rendition"},"on GitHub"),".")),(0,o.mdx)("h3",{id:"1-prepare-your-plugin-scaffold"},"1. Prepare your plugin scaffold"),(0,o.mdx)("p",null,"First, edit the manifest file for the plugin you created in our ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/tutorials/quick-start"},"Quick Start Tutorial"),"."),(0,o.mdx)("p",null,"Replace the ",(0,o.mdx)("inlineCode",{parentName:"p"},"uiEntryPoints")," field of the manifest with the following:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"uiEntryPoints": [\n    {\n        "type": "menu",\n        "label": "Export Rendition",\n        "commandId": "exportRendition"\n    }\n]\n')),(0,o.mdx)("p",null,"If you're curious about what each entry means, ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/plugin-development/plugin-structure/manifest/"},"see the manifest documentation"),", where you can also learn about all manifest requirements for a plugin to be published in the XD Plugin Manager."),(0,o.mdx)("p",null,"Then, update your ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file, mapping the manifest's ",(0,o.mdx)("inlineCode",{parentName:"p"},"commandId")," to a handler function."),(0,o.mdx)("p",null,"Replace the content of your ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file with the following code:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},"async function exportRendition(selection) {\n  if (selection.items.length > 0) {\n    // The body of this function is added later\n  }\n}\n\nmodule.exports = {\n  commands: {\n    exportRendition,\n  },\n};\n")),(0,o.mdx)("p",null,"A couple of notes about the handler function shell above:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"This function will run ",(0,o.mdx)("em",{parentName:"li"},"asynchronously"),", as indicated by the ",(0,o.mdx)("inlineCode",{parentName:"li"},"async")," keyword at the beginning of the line. To learn more about what this means, see ",(0,o.mdx)("a",{parentName:"li",href:"/uxp-xd/develop/plugin-development/javascript-and-xd/sync-async/"},"our document on sync and async support"),"."),(0,o.mdx)("li",{parentName:"ol"},"Since this plugin will require user to select an object, we use an ",(0,o.mdx)("inlineCode",{parentName:"li"},"if")," statement to check if there is an XD object selected.")),(0,o.mdx)("p",null,"The remaining steps in this tutorial describe additional edits to the ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file."),(0,o.mdx)("h3",{id:"2-require-in-xd-api-dependencies"},"2. Require in XD API dependencies"),(0,o.mdx)("p",null,"For this tutorial, we just need access to one XD module and one UXP class."),(0,o.mdx)("p",null,"Add the following lines to the top of your ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},'// Add this to the top of your main.js file\nconst application = require("application");\nconst fs = require("uxp").storage.localFileSystem;\n')),(0,o.mdx)("p",null,"Now the ",(0,o.mdx)("inlineCode",{parentName:"p"},"application")," module and ",(0,o.mdx)("inlineCode",{parentName:"p"},"localFileSystem")," class are required in and ready to be used. These modules are required to invoke the folder picker and export renditions."),(0,o.mdx)("h3",{id:"3-invoke-the-folder-picker"},"3. Invoke the folder picker"),(0,o.mdx)("p",null,"Here, we'll use ",(0,o.mdx)("inlineCode",{parentName:"p"},"uxp.storage.localFileSystem")," (our ",(0,o.mdx)("inlineCode",{parentName:"p"},"fs")," constant) to invoke the folder picker:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},'const folder = await fs.getFolder();\nconst file = await folder.createFile("rendition.png");\n')),(0,o.mdx)("p",null,"This will invoke the default folder picker for user to choose the save directory and create a file named ",(0,o.mdx)("inlineCode",{parentName:"p"},"rendition.png"),"."),(0,o.mdx)("h3",{id:"4-define-your-rendition-settings"},"4. Define your rendition settings"),(0,o.mdx)("p",null,"Next, we'll define the settings for our desired renditions."),(0,o.mdx)("p",null,"Note the data structure in the code below: an array of objects (in this case, one object)."),(0,o.mdx)("p",null,"Each of the numbered comments are explained below the code:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},"let renditionSettings = [\n  {\n    node: selection.items[0], // [1]\n    outputFile: file, // [2]\n    type: application.RenditionType.PNG, // [3]\n    scale: 2, // [4]\n  },\n];\n")),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"selection.items[0]")," refers to the first user-selected item in the document"),(0,o.mdx)("li",{parentName:"ol"},"Set the ",(0,o.mdx)("inlineCode",{parentName:"li"},"outputFile")," property to the ",(0,o.mdx)("inlineCode",{parentName:"li"},"file")," constant we created in step #3"),(0,o.mdx)("li",{parentName:"ol"},"Set the ",(0,o.mdx)("inlineCode",{parentName:"li"},"type")," property to ",(0,o.mdx)("inlineCode",{parentName:"li"},"application.RenditionType.PNG")),(0,o.mdx)("li",{parentName:"ol"},"Set the desired scale of the exported rendition")),(0,o.mdx)("p",null,"We'll use this data structure containing our settings in the next step."),(0,o.mdx)("h3",{id:"5-create-renditions"},"5. Create renditions"),(0,o.mdx)("p",null,"This is where we attempt to create the renditions:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},"application\n  .createRenditions(renditionSettings) // [1]\n  .then((results) => {\n    // [2]\n    console.log(\n      `PNG rendition has been saved at ${results[0].outputFile.nativePath}`\n    );\n  })\n  .catch((error) => {\n    // [3]\n    console.log(error);\n  });\n")),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"The ",(0,o.mdx)("inlineCode",{parentName:"li"},"application#createRenditions")," method accepts as an argument the ",(0,o.mdx)("inlineCode",{parentName:"li"},"renditionSettings")," data structure that we created in step #4."),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"createRenditions")," returns a Promise. We log success to the developer console."),(0,o.mdx)("li",{parentName:"ol"},"Any errors will land in ",(0,o.mdx)("inlineCode",{parentName:"li"},".catch"),", which we also log to the developer console.")),(0,o.mdx)("h3",{id:"6-run-the-plugin"},"6. Run the plugin"),(0,o.mdx)("p",null,"After saving all of your changes, reload the plugin in XD. Make sure to select an artboard and run the plugin command."),(0,o.mdx)("p",null,"You should see a folder picker like this one:"),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"87.5%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/5530d/export-rendition-pick-file.webp 320w","/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/0c8fb/export-rendition-pick-file.webp 640w","/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/94b1e/export-rendition-pick-file.webp 1280w","/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/38bbb/export-rendition-pick-file.webp 1546w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/dd4a7/export-rendition-pick-file.png 320w","/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/0f09e/export-rendition-pick-file.png 640w","/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/bbbf7/export-rendition-pick-file.png 1280w","/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/1855e/export-rendition-pick-file.png 1546w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uxp-xd/static/3a2546acc11cbbba17f822289240a2c3/bbbf7/export-rendition-pick-file.png",alt:"System folder picker screen",title:"System folder picker screen",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"The rendition will be saved at the specified location."),(0,o.mdx)("p",null,"Open the developer console to see your success or error message from the previous step."))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-develop-tutorials-how-to-export-a-rendition-index-md-38b4acfa97123e69d064.js.map
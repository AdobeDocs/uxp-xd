{"version":3,"file":"component---src-pages-develop-tutorials-how-to-make-network-requests-index-md-d1aa8343ab79625894b4.js","mappings":"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","sources":["webpack://uxp-xd/./src/pages/develop/tutorials/how-to-make-network-requests/index.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/uxp-xd/uxp-xd/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"how-to-make-network-requests\"\n    }}>{`How to make network requests`}</h1>\n    <p>{`This sample app will show you how to load an image in an XD object (Rectangle or Artboard) by making network requests using `}<inlineCode parentName=\"p\">{`XHR`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`fetch`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Basic knowledge of HTML, CSS, and JavaScript`}</li>\n      <li parentName=\"ul\">{`Basic knowledge of `}<inlineCode parentName=\"li\">{`XMLHttpRequest`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`fetch`}</inlineCode></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/uxp-xd/develop/tutorials/quick-start/\"\n        }}>{`Quick Start Tutorial`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/uxp-xd/develop/tutorials/debugging/\"\n        }}>{`Debugging Tutorial`}</a></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"development-steps\"\n    }}>{`Development Steps`}</h2>\n    <blockquote>\n      <p parentName=\"blockquote\"><strong parentName=\"p\">{`Info`}</strong>{`\nComplete code for this plugin can be found `}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/AdobeXD/Plugin-Samples/tree/master/how-to-make-network-requests\"\n        }}>{`on GitHub`}</a>{`.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"1-create-plugin-scaffold\"\n    }}>{`1. Create plugin scaffold`}</h3>\n    <p>{`First, edit the manifest file for the plugin you created in our `}<a parentName=\"p\" {...{\n        \"href\": \"/uxp-xd/develop/tutorials/quick-start\"\n      }}>{`Quick Start Tutorial`}</a>{`.`}</p>\n    <p>{`Replace the `}<inlineCode parentName=\"p\">{`uiEntryPoints`}</inlineCode>{` field of the manifest with the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`\"uiEntryPoints\": [\n    {\n        \"type\": \"menu\",\n        \"label\": \"How to make network requests\",\n        \"commandId\": \"applyImage\"\n    }\n]\n`}</code></pre>\n    <p>{`If you're curious about what each entry means, `}<a parentName=\"p\" {...{\n        \"href\": \"/uxp-xd/develop/plugin-development/plugin-structure/manifest/\"\n      }}>{`see the manifest documentation`}</a>{`, where you can also learn about all manifest requirements for a plugin to be published in the XD Plugin Manager.`}</p>\n    <p>{`Then, update your `}<inlineCode parentName=\"p\">{`main.js`}</inlineCode>{` file, mapping the manifest's `}<inlineCode parentName=\"p\">{`commandId`}</inlineCode>{` to a handler function.`}</p>\n    <p>{`Replace the content of your `}<inlineCode parentName=\"p\">{`main.js`}</inlineCode>{` file with the following code:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`function applyImage(selection) {\n  // The body of this function is added later\n}\n\nmodule.exports = {\n  commands: {\n    applyImage,\n  },\n};\n`}</code></pre>\n    <p>{`The remaining steps in this tutorial describe additional edits to the `}<inlineCode parentName=\"p\">{`main.js`}</inlineCode>{` file.`}</p>\n    <h3 {...{\n      \"id\": \"2-require-in-xd-api-dependencies\"\n    }}>{`2. Require in XD API dependencies`}</h3>\n    <p>{`For this tutorial, we just need access to one XD scenegraph class.`}</p>\n    <p>{`Add the following lines to the top of your `}<inlineCode parentName=\"p\">{`main.js`}</inlineCode>{` file:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`// Add this to the top of your main.js file\nconst { ImageFill } = require(\"scenegraph\");\n`}</code></pre>\n    <p>{`Now the `}<inlineCode parentName=\"p\">{`ImageFill`}</inlineCode>{` class is imported and ready to be used.`}</p>\n    <h3 {...{\n      \"id\": \"3-write-a-helper-function-to-make-xhr-requests\"\n    }}>{`3. Write a helper function to make XHR requests`}</h3>\n    <p>{`Our XHR helper `}<inlineCode parentName=\"p\">{`xhrBinary`}</inlineCode>{` will make an HTTP GET request to any URL it is passed, and a return a Promise with an `}<inlineCode parentName=\"p\">{`arraybuffer`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`function xhrBinary(url) {\n  // [1]\n  return new Promise((resolve, reject) => {\n    // [2]\n    const req = new XMLHttpRequest(); // [3]\n    req.onload = () => {\n      if (req.status === 200) {\n        try {\n          const arr = new Uint8Array(req.response); // [4]\n          resolve(arr); // [5]\n        } catch (err) {\n          reject(\\`Couldnt parse response. \\${err.message}, \\${req.response}\\`);\n        }\n      } else {\n        reject(\\`Request had an error: \\${req.status}\\`);\n      }\n    };\n    req.onerror = reject;\n    req.onabort = reject;\n    req.open(\"GET\", url, true);\n    req.responseType = \"arraybuffer\"; // [6]\n    req.send();\n  });\n}\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\"><inlineCode parentName=\"li\">{`xhrBinary`}</inlineCode>{` function takes a url as a parameter`}</li>\n      <li parentName=\"ol\">{`The function returns a Promise`}</li>\n      <li parentName=\"ol\">{`The function uses `}<inlineCode parentName=\"li\">{`XMLHttpRequest`}</inlineCode>{` to make network requests`}</li>\n      <li parentName=\"ol\">{`Once the correct response comes back, the function uses `}<inlineCode parentName=\"li\">{`Unit8Array`}</inlineCode>{` method to convert the response to an `}<inlineCode parentName=\"li\">{`arraybuffer`}</inlineCode></li>\n      <li parentName=\"ol\">{`After the conversion, the promise is resolved`}</li>\n      <li parentName=\"ol\">{`Make sure the set the `}<inlineCode parentName=\"li\">{`responseType`}</inlineCode>{` as `}<inlineCode parentName=\"li\">{`arraybuffer`}</inlineCode></li>\n    </ol>\n    <h3 {...{\n      \"id\": \"4-write-a-helper-to-apply-imagefill\"\n    }}>{`4. Write a helper to apply `}<inlineCode parentName=\"h3\">{`ImageFill`}</inlineCode></h3>\n    <p>{`This helper function will create an `}<inlineCode parentName=\"p\">{`ImageFill`}</inlineCode>{` instance that can be applied to a user-selected XD scengraph object:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`function applyImagefill(selection, file) {\n  // [1]\n  const imageFill = new ImageFill(file); // [2]\n  selection.items[0].fill = imageFill; // [3]\n}\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">{`The function accepts the `}<inlineCode parentName=\"li\">{`selection`}</inlineCode>{` and a `}<inlineCode parentName=\"li\">{`file`}</inlineCode>{` as parameters`}</li>\n      <li parentName=\"ol\">{`Use the `}<inlineCode parentName=\"li\">{`ImageFill`}</inlineCode>{` class to create the fill`}</li>\n      <li parentName=\"ol\">{`Apply the image to the user-selected XD object`}</li>\n    </ol>\n    <p>{`We'll use this function in the next step.`}</p>\n    <h3 {...{\n      \"id\": \"5-write-a-helper-function-to-download-the-image\"\n    }}>{`5. Write a helper function to download the image`}</h3>\n    <p>{`Ok, you've just made three helper functions. Now we're going to tie them all together!`}</p>\n    <p>{`Note the use of the `}<inlineCode parentName=\"p\">{`async`}</inlineCode>{` keyword at the beginning of the function.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`async function downloadImage(selection, jsonResponse) {\n  // [1]\n  try {\n    const photoUrl = jsonResponse.message; // [2]\n    const photoObj = await xhrBinary(photoUrl); // [3]\n    const tempFolder = await fs.getTemporaryFolder(); // [4]\n    const tempFile = await tempFolder.createFile(\"tmp\", { overwrite: true }); // [5]\n    await tempFile.write(photoObj, { format: uxp.formats.binary }); // [6]\n    applyImagefill(selection, tempFile); // [7]\n  } catch (err) {\n    console.log(\"error\");\n    console.log(err.message);\n  }\n}\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">{`This helper function accepts the `}<inlineCode parentName=\"li\">{`selection`}</inlineCode>{` and a JSON response object as parameters`}</li>\n      <li parentName=\"ol\">{`Gets the URL from the JSON response`}</li>\n      <li parentName=\"ol\">{`Uses our async `}<inlineCode parentName=\"li\">{`xhrBinary`}</inlineCode>{` function to get an `}<inlineCode parentName=\"li\">{`arraybuffer`}</inlineCode></li>\n      <li parentName=\"ol\">{`Uses the `}<inlineCode parentName=\"li\">{`fs`}</inlineCode>{` module and its `}<inlineCode parentName=\"li\">{`getTemporaryFolder`}</inlineCode>{` method to create a temp folder`}</li>\n      <li parentName=\"ol\">{`Uses the `}<inlineCode parentName=\"li\">{`createFile`}</inlineCode>{` method to create a temp file`}</li>\n      <li parentName=\"ol\">{`Uses the `}<inlineCode parentName=\"li\">{`write`}</inlineCode>{` method to write the binary file to store`}</li>\n      <li parentName=\"ol\">{`Uses `}<inlineCode parentName=\"li\">{`applyImagefill`}</inlineCode>{` to place the image into a user-selected XD object`}</li>\n    </ol>\n    <h3 {...{\n      \"id\": \"6-write-the-main-handler-function\"\n    }}>{`6. Write the main handler function`}</h3>\n    <p>{`This is the function that will be called with the user runs our plugin command.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`function applyImage(selection) {\n  if (selection.items.length) {\n    // [1]\n    const url = \"https://dog.ceo/api/breeds/image/random\"; // [2]\n    return fetch(url) // [3]\n      .then(function (response) {\n        return response.json(); // [4]\n      })\n      .then(function (jsonResponse) {\n        return downloadImage(selection, jsonResponse); // [5]\n      });\n  } else {\n    console.log(\"Please select a shape to apply the downloaded image.\");\n  }\n}\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">{`Checks if user has selected at least one object`}</li>\n      <li parentName=\"ol\">{`This is an example public URL to an image`}</li>\n      <li parentName=\"ol\">{`Pass the URL to `}<inlineCode parentName=\"li\">{`fetch`}</inlineCode></li>\n      <li parentName=\"ol\">{`The first `}<inlineCode parentName=\"li\">{`.then`}</inlineCode>{` block returns the response JSON object`}</li>\n      <li parentName=\"ol\">{`The second `}<inlineCode parentName=\"li\">{`.then`}</inlineCode>{` block passes the `}<inlineCode parentName=\"li\">{`selection`}</inlineCode>{` and our JSON reponse to our `}<inlineCode parentName=\"li\">{`downloadImage`}</inlineCode>{` function, ultimately placing it in the document`}</li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}
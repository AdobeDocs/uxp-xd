"use strict";(self.webpackChunkuxp_xd=self.webpackChunkuxp_xd||[]).push([[1422],{78624:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return p}});var a=t(87462),i=t(63366),o=(t(15007),t(64983)),l=t(91515),r=["components"],d={},m={_frontmatter:d},s=l.Z;function p(e){var n=e.components,t=(0,i.Z)(e,r);return(0,o.mdx)(s,(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"how-to-work-with-a-scenenodelist"},"How to work with a SceneNodeList"),(0,o.mdx)("p",null,"This sample demonstrates how to work with a SceneNodeList in Adobe XD. The short version of this story is that a ",(0,o.mdx)("inlineCode",{parentName:"p"},"SceneNodeList")," is ",(0,o.mdx)("em",{parentName:"p"},"not an Array"),". Read on for details."),(0,o.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Basic knowledge of HTML, CSS, and JavaScript."),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"/uxp-xd/develop/tutorials/quick-start/"},"Quick Start Tutorial")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"/uxp-xd/develop/tutorials/debugging/"},"Debugging Tutorial"))),(0,o.mdx)("h2",{id:"development-steps"},"Development Steps"),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},(0,o.mdx)("strong",{parentName:"p"},"Info"),"\nComplete code for this plugin can be found ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/AdobeXD/Plugin-Samples/tree/master/how-to-work-with-scenenodelist"},"on GitHub"),".")),(0,o.mdx)("h3",{id:"1-prepare-your-plugin-scaffold"},"1. Prepare your plugin scaffold"),(0,o.mdx)("p",null,"First, edit the manifest file for the plugin you created in our ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/tutorials/quick-start/"},"Quick Start Tutorial"),"."),(0,o.mdx)("p",null,"Replace the ",(0,o.mdx)("inlineCode",{parentName:"p"},"uiEntryPoints")," field of the manifest with the following:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'"uiEntryPoints": [\n    {\n        "type": "menu",\n        "label": "Create Elements",\n        "commandId": "createElements"\n    },\n    {\n        "type": "menu",\n        "label": "Filter and Color",\n        "commandId": "filterAndColor"\n    }\n]\n')),(0,o.mdx)("p",null,"If you're curious about what each entry means, ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/plugin-development/plugin-structure/manifest/"},"see the manifest documentation"),", where you can also learn about all manifest requirements for a plugin to be published in the XD Plugin Manager."),(0,o.mdx)("p",null,"Then, update your ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file, mapping ",(0,o.mdx)("em",{parentName:"p"},"both")," of the manifest's ",(0,o.mdx)("inlineCode",{parentName:"p"},"commandId")," to their respective handler functions."),(0,o.mdx)("p",null,"Replace the content of your ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file with the code below."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},"function createElements(selection) {\n  // The body of this function is added later\n}\n\nfunction filterAndColor(selection, documentRoot) {\n  // The body of this function is added later\n}\n\nmodule.exports = {\n  commands: {\n    createElements,\n    filterAndColor,\n  },\n};\n")),(0,o.mdx)("p",null,"Note the different use of ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/plugin-development/plugin-structure/handlers/#contextual-arguments"},"contextual arguments")," in each function: the first function only makes use of ",(0,o.mdx)("inlineCode",{parentName:"p"},"selection"),", which the second makes use of both ",(0,o.mdx)("inlineCode",{parentName:"p"},"selection")," and ",(0,o.mdx)("inlineCode",{parentName:"p"},"documentRoot"),". We'll look at why ",(0,o.mdx)("inlineCode",{parentName:"p"},"documentRoot")," is used in a later step."),(0,o.mdx)("p",null,"The remaining steps in this tutorial describe additional edits to the ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file."),(0,o.mdx)("h3",{id:"2-require-in-xd-api-dependencies"},"2. Require in XD API dependencies"),(0,o.mdx)("p",null,"For this tutorial, we just need access to two XD scenegraph classes and one XD module."),(0,o.mdx)("p",null,"Add the following lines to the top of your ",(0,o.mdx)("inlineCode",{parentName:"p"},"main.js")," file:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},'// Add this to the top of your main.js file\nconst { Artboard, Rectangle, Ellipse, Text, Color } = require("scenegraph");\n')),(0,o.mdx)("p",null,"Now the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Artboard"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"Rectangle"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"Ellipse"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"Text"),", and ",(0,o.mdx)("inlineCode",{parentName:"p"},"Color")," classes are required in and ready to be used."),(0,o.mdx)("h3",{id:"3-create-the-handler-function-for-createelements"},"3. Create the handler function for ",(0,o.mdx)("inlineCode",{parentName:"h3"},"createElements")),(0,o.mdx)("p",null,"This function will do what it says on the label: create elements in the XD document. It's just here for the purpose of generating elements that will help us learn about the ",(0,o.mdx)("inlineCode",{parentName:"p"},"SceneNodeList")," in the next section."),(0,o.mdx)("p",null,"Because of that, we won't go into detail about the ",(0,o.mdx)("inlineCode",{parentName:"p"},"createElements")," function. In short, it will create a number of rectangles, ellipses, and text elements, and put them on your XD artboard."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},'function createElements(selection) {\n  for (let i = 0; i < 5; i++) {\n    let rectangle = new Rectangle();\n    rectangle.width = 30 * i;\n    rectangle.height = 20 * i;\n    rectangle.fill = new Color("gray");\n    selection.insertionParent.addChild(rectangle);\n    rectangle.moveInParentCoordinates(50 * i, 50 * i);\n\n    let ellipse = new Ellipse();\n    ellipse.radiusX = 20 * i;\n    ellipse.radiusY = 20 * i;\n    ellipse.fill = new Color("gray");\n    selection.insertionParent.addChild(ellipse);\n    ellipse.moveInParentCoordinates(100 * i, 200 * i);\n\n    let text = new Text();\n    text.text = `example text ${i}`;\n    text.styleRanges = [\n      {\n        length: text.text.length,\n        fill: new Color("gray"),\n        fontSize: 20,\n      },\n    ];\n    selection.insertionParent.addChild(text);\n    text.moveInParentCoordinates(200 * i, 100 * i);\n  }\n}\n')),(0,o.mdx)("p",null,"We'll run the command for this function in a later step."),(0,o.mdx)("h3",{id:"4-create-the-handler-function-for-filterandcolor"},"4. Create the handler function for ",(0,o.mdx)("inlineCode",{parentName:"h3"},"filterAndColor")),(0,o.mdx)("p",null,"So let's take a look at working with a ",(0,o.mdx)("inlineCode",{parentName:"p"},"SceneNodeList"),"!"),(0,o.mdx)("p",null,"The function we create in this step will filter all content on the artboard for rectangles, and then color only the rectangles red."),(0,o.mdx)("p",null,"Recall that in the first step, we made a note of ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/plugin-development/plugin-structure/handlers/#contextual-arguments"},"contextual arguments in command handlers"),", and particularly that this ",(0,o.mdx)("inlineCode",{parentName:"p"},"filterAndColor")," function makes use of the second ",(0,o.mdx)("inlineCode",{parentName:"p"},"documentRoot")," argument."),(0,o.mdx)("p",null,"Like any ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/reference/scenegraph/#scenenode"},(0,o.mdx)("inlineCode",{parentName:"a"},"SceneNode")),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"documentRoot")," has a ",(0,o.mdx)("inlineCode",{parentName:"p"},".children")," property that returns a ",(0,o.mdx)("inlineCode",{parentName:"p"},"SceneNodeList"),"."),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},(0,o.mdx)("strong",{parentName:"p"},"info"),"\nA ",(0,o.mdx)("inlineCode",{parentName:"p"},"SceneNodeList")," is ",(0,o.mdx)("em",{parentName:"p"},"not an Array"),". One notable difference is that, with a ",(0,o.mdx)("inlineCode",{parentName:"p"},"SceneNodeList"),", you access elements in the list using the ",(0,o.mdx)("inlineCode",{parentName:"p"},"#at")," method (for example, ",(0,o.mdx)("inlineCode",{parentName:"p"},"node.children.at(0)")," to get the first node in the list). ",(0,o.mdx)("a",{parentName:"p",href:"/uxp-xd/develop/reference/SceneNodeList/"},"You can learn more about the ",(0,o.mdx)("inlineCode",{parentName:"a"},"SceneNodeList")," class here"),".")),(0,o.mdx)("p",null,"Let's fill out our handler function. Each of the numbered comments are explained below the code:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},'function filterAndColor(selection, documentRoot) {\n  documentRoot.children.forEach((node) => {\n    // [1]\n    if (node instanceof Artboard) {\n      // [2]\n      let artboard = node;\n      let rectangles = artboard.children.filter((artboardChild) => {\n        // [3]\n        return artboardChild instanceof Rectangle;\n      });\n      rectangles.forEach((rectangle) => {\n        // [4]\n        rectangle.fill = new Color("red");\n      });\n    }\n  });\n}\n')),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Start from the ",(0,o.mdx)("inlineCode",{parentName:"li"},"documentRoot")," node and traverse down the tree using the ",(0,o.mdx)("inlineCode",{parentName:"li"},".children")," property. Since ",(0,o.mdx)("inlineCode",{parentName:"li"},".children")," is a ",(0,o.mdx)("inlineCode",{parentName:"li"},"SceneNodeList"),", it has a ",(0,o.mdx)("inlineCode",{parentName:"li"},"#forEach")," method that will let us iterate through the list, node by node."),(0,o.mdx)("li",{parentName:"ol"},"Since we started at the ",(0,o.mdx)("inlineCode",{parentName:"li"},"documentRoot")," level, the first thing we need to do is look for the artboards in the document. This line ensures that we only traverse down further if the current child ",(0,o.mdx)("inlineCode",{parentName:"li"},"node")," is an artboard."),(0,o.mdx)("li",{parentName:"ol"},"Once we've found an artboard, we look at its ",(0,o.mdx)("inlineCode",{parentName:"li"},".children")," property, which is also a ",(0,o.mdx)("inlineCode",{parentName:"li"},"SceneNodeList"),". This ",(0,o.mdx)("inlineCode",{parentName:"li"},"SceneNodeList will contain all of the elements we created earlier. We use the "),"SceneNodeList#filter",(0,o.mdx)("inlineCode",{parentName:"li"},"method to filter the artboard's children down to a"),"rectangles` array."),(0,o.mdx)("li",{parentName:"ol"},"Finally, we iteracte over the ",(0,o.mdx)("inlineCode",{parentName:"li"},"rectangles")," array with ",(0,o.mdx)("inlineCode",{parentName:"li"},"#forEach"),", coloring each rectangle red as we go.")),(0,o.mdx)("h3",{id:"5-run-the-plugin"},"5. Run the plugin"),(0,o.mdx)("p",null,"After saving all your changes, reload the plugin in XD."),(0,o.mdx)("p",null,'First, select an artboard and run the "Create Elements" command. You plugin will pull shapes on the artboard.'),(0,o.mdx)("p",null,'Then, run the "Filter and Color" command:'),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"60.62500000000001%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uxp-xd/static/4413f906d501fc683833a12707d332fe/5530d/filter-and-color.webp 320w","/uxp-xd/static/4413f906d501fc683833a12707d332fe/0c8fb/filter-and-color.webp 640w","/uxp-xd/static/4413f906d501fc683833a12707d332fe/94b1e/filter-and-color.webp 1280w","/uxp-xd/static/4413f906d501fc683833a12707d332fe/37c77/filter-and-color.webp 1430w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/uxp-xd/static/4413f906d501fc683833a12707d332fe/dd4a7/filter-and-color.png 320w","/uxp-xd/static/4413f906d501fc683833a12707d332fe/0f09e/filter-and-color.png 640w","/uxp-xd/static/4413f906d501fc683833a12707d332fe/bbbf7/filter-and-color.png 1280w","/uxp-xd/static/4413f906d501fc683833a12707d332fe/1d7f3/filter-and-color.png 1430w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uxp-xd/static/4413f906d501fc683833a12707d332fe/bbbf7/filter-and-color.png",alt:"multiple texts, rectangles, and circles",title:"multiple texts, rectangles, and circles",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"You've worked with a ",(0,o.mdx)("inlineCode",{parentName:"p"},"SceneNodeList")," to iterate through an artboard's contents and filter based on element type!"))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-develop-tutorials-how-to-work-with-scenenodelist-index-md-929560b303138ac587cc.js.map